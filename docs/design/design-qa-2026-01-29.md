# 全站 Design QA 清单（Top 20 UI 不一致）

**日期**: 2026-01-29  
**审计范围**: /, /home, /auth (login/signup), /creator/studio, /me/wallet  
**截图目录**: `tests/design-qa/screenshots/2026-01-29/`（需先启动服务并执行截图脚本生成）  
**执行命令**: `pnpm exec playwright test tests/e2e/design-qa/screenshots.spec.ts --project=chromium`

---

## 截图脚本说明

- 脚本位置: `tests/e2e/design-qa/screenshots.spec.ts`
- Viewport: 1440×900
- 登录: `/api/test/session`（需 `NEXT_PUBLIC_TEST_MODE=true` 及 Supabase 测试账号）
- 截图前等待: `domcontentloaded` + 关键元素可见（无 `waitForTimeout`）
- **运行前请先启动应用**（如 `pnpm build && pnpm start` 或 `pnpm dev`），否则 goto 会超时。

---

## Top 20 UI 不一致（固定表格）

| ID  | 页面                        | 问题描述（用户视角）                                                                                                              | 证据                                                              | 根因定位                                                                                            | 推荐修复                                                                                | 影响范围                       | 优先级 | 预估改动点                                   | 技能映射 |
| --- | --------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | ------------------------------ | ------ | -------------------------------------------- | -------- |
| 1   | /auth                       | 非 .auth-page 下主色为灰，品牌渐变仅 .dark 或 .auth-page 内生效，light 模式 CTA 与品牌不符                                        | auth-signup.png 主 CTA 区域；`:root` 无品牌 token                 | `app/globals.css` `:root` 仅 `--primary: oklch(0.2 0 0)`；品牌渐变在 `.dark` 与 `.auth-page`        | 改 token：在 `:root` 或 light 作用域增加可选品牌变量，或保持仅 auth 作用域              | 多页（未套 .auth-page 的 CTA） | P1     | globals.css                                  | S1       |
| 2   | /auth                       | Sign Up 表单内 Google 按钮与 Login 表单内 Google 按钮 class 不一致（signup 有 rounded-xl min-h-[44px]，login 仅 w-full）          | AuthPageClient.tsx:392 vs :539                                    | `app/auth/AuthPageClient.tsx` 两处 Button variant="outline" 的 className 不同                       | 改页面 class：统一两处为同一 className（如仅 w-full min-h-[44px]）                      | 仅该页                         | P2     | AuthPageClient.tsx                           | S2       |
| 3   | /creator/studio             | 时间范围 Tab（7d/30d/90d）非 shadcn Tabs，为多个 Button，选中态与 auth tabs 视觉体系不一致                                        | creator-studio.png 时间筛选区；studio/page.tsx:221-251            | `app/creator/studio/page.tsx` 使用 role="tablist" + Button default/outline，无 data-state 高对比    | 改组件或 token：统一使用 TabsList/TabsTrigger 或为“筛选 tab”定义 .filter-tabs token     | 多页（若有类似筛选）           | P1     | creator/studio/page.tsx, 可选 globals.css    | S1,S2    |
| 4   | /creator/studio             | 卡片内 CTA（Analytics/Subscribers/Earnings）重复写 transition/rounded-xl/min-h，与 Button 默认 variant 叠加                       | studio/page.tsx:300-340 三处 Button                               | `app/creator/studio/page.tsx` 每处 `className="h-auto py-4 rounded-xl min-h-[44px] transition-..."` | 改组件：抽 Button variant（如 "nav-card"）或改页面仅保留必要 class（如 h-auto py-4）    | 仅该页                         | P2     | creator/studio/page.tsx, 可选 button.tsx     | S2       |
| 5   | /me/wallet                  | 充值金额卡片与交易列表卡片圆角/阴影混用 rounded-xl、hover:shadow-md，无统一 card 层级 token                                       | wallet.png 充值区与交易列表；wallet/page.tsx:253-276, 365         | `app/me/wallet/page.tsx` 内联 `rounded-xl border-2`、`rounded-xl p-6 hover:shadow-md`               | 改 token：globals.css 定义 .card-interactive 或使用现有 Card 不覆盖                     | 多页                           | P2     | globals.css 或 wallet/page.tsx               | S1       |
| 6   | /me/wallet                  | 成功/失败状态块使用 bg-green-500/10、bg-destructive/10 硬编码，未用 semantic token                                                | wallet/page.tsx:284, 292                                          | `app/me/wallet/page.tsx` 直接 `bg-green-500/10 text-green-600`、`bg-destructive/10`                 | 改 token：globals.css 增加 --success 背景/前景或 .alert-success/.alert-error            | 多页                           | P2     | globals.css, wallet/page.tsx                 | S1       |
| 7   | /home                       | Feed 卡片与帖子操作按钮混用 rounded-xl/rounded-lg，且部分按钮 min-h 不一致（44 vs 40）                                            | home.png 帖子卡片区；HomeFeedClient.tsx:170, 350, 387, 418        | `app/home/components/HomeFeedClient.tsx` Card rounded-xl，内部按钮有 rounded-lg min-h-[40px]        | 改组件/页面：统一主 CTA min-h 44、次级 40，圆角统一用 token                             | 多页                           | P1     | HomeFeedClient.tsx, 可选 globals.css         | S1,S2    |
| 8   | /creator/studio/post/list   | Badge 状态色三套写法：green-500/10、glass+subscribe-gradient/20、glass+unlock 变量，无统一 Badge variant                          | post/list/page.tsx:115-127                                        | `app/creator/studio/post/list/page.tsx` 三处 Badge className 各异                                   | 改组件：Button/Badge 增加 semantic variant（success/subscribe/ppv）或统一用 token       | 多页                           | P1     | post/list/page.tsx, badge.tsx 或 globals.css | S1,S2    |
| 9   | /creator/studio/earnings    | 收益状态 Badge 与 post/list 类似，多处 bg-primary/10、bg-green-500/10、var(--bg-purple-500-10) 混用                               | earnings/page.tsx:128-145, 334-348                                | `app/creator/studio/earnings/page.tsx` 内联 Badge className                                         | 改 token/组件：与 #8 统一 semantic Badge variant                                        | 多页                           | P1     | earnings/page.tsx, 同上                      | S1,S2    |
| 10  | /creator/studio/subscribers | Subscribers 状态 Badge 与 earnings/list 不一致                                                                                    | subscribers/page.tsx:129-141                                      | `app/creator/studio/subscribers/page.tsx` Badge 写法                                                | 同 #8 #9                                                                                | 多页                           | P2     | subscribers/page.tsx                         | S2       |
| 11  | 全站                        | 非 auth 页使用 Button 时大量重复 className（rounded-xl min-h-[44px] transition-...），与 button.tsx 默认重复                      | studio/page.tsx, wallet/page.tsx, me/page.tsx, HomeFeedClient.tsx | 各页面覆盖 Button 的 transition/rounded/min-h                                                       | 改组件：button.tsx 默认或 variant 已含 rounded-xl、min-h、transition，页面只加尺寸/宽度 | 全站                           | P0     | button.tsx, 各页面删冗余 class               | S1,S2    |
| 12  | components/paywall-modal    | 支付弹窗使用 DialogContent 但无 DialogTitle/DialogDescription，a11y 警告（缺少 aria-labelledby/describedby）                      | CI 或 a11y 审计；paywall-modal.tsx 仅 h2/p                        | `components/paywall-modal.tsx` 用 div+h2+p 代替 DialogTitle/DialogDescription                       | 改组件：用 DialogTitle + DialogDescription 包裹标题与说明                               | 仅该组件                       | P0     | paywall-modal.tsx                            | S5       |
| 13  | components/lock-overlay     | 仅 role="dialog"，无 DialogTitle/Description，屏幕阅读器无法获知标题与描述                                                        | lock-overlay.tsx:17                                               | `components/lock-overlay.tsx` 仅设 role="dialog"                                                    | 改组件：使用 Radix Dialog 或补充 aria-labelledby/describedby                            | 仅该组件                       | P1     | lock-overlay.tsx                             | S5       |
| 14  | /auth                       | Tab 选中态依赖 .auth-tab-trigger[data-state=active]，非 auth 的 Tabs 仍为 data-[state=active]:glass，对比度低                     | auth-login.png Tabs 区；tabs.tsx:35                               | `components/ui/tabs.tsx` TabsTrigger 默认 data-[state=active]:glass                                 | 改组件：tabs.tsx 增加可选 variant（如 "pills"）高对比，或全局提高 active 对比度         | 多页                           | P1     | tabs.tsx, 可选 globals.css                   | S2,S4    |
| 15  | /me, /creator/\*            | 表单 Input/Textarea 与 Button 间距不统一：部分 space-y-4，部分 space-y-2，卡片内 padding 各异                                     | me/page.tsx 多 Card；creator/onboarding, new-post                 | 各页面 CardContent、form space-y 自定                                                               | 改 token：globals.css 或 layout 定义 --form-gap、--card-padding                         | 多页                           | P2     | globals.css, 若干 page                       | S1       |
| 16  | /me/wallet                  | 交易行“收入/支出”图标与文字颜色用 text-green-600/text-muted 等硬编码，未用 semantic 色                                            | wallet/page.tsx:370-401                                           | `app/me/wallet/page.tsx` 内联 `text-green-600 dark:text-green-400`                                  | 改 token：--success、--muted 或 .text-income/.text-outcome                              | 多页                           | P2     | globals.css, wallet/page.tsx                 | S1       |
| 17  | /creator/[id], /posts/[id]  | 订阅/解锁 CTA 使用 variant="gradient" 或 variant="default" 且再叠 className（rounded-xl font-bold shadow-lg），与 auth CTA 不统一 | creator/[id]/page.tsx:438,499；posts/[id]/page.tsx:262            | 页面级覆盖 Button 样式                                                                              | 改页面：仅保留 variant，去掉重复 rounded/shadow；或改 token 统一主 CTA                  | 多页                           | P1     | creator/[id]/page.tsx, posts/[id]/page.tsx   | S2       |
| 18  | /auth                       | 18+ 勾选提示与输入框说明文字字号/色一致（text-xs text-muted-foreground），层级不够区分                                            | AuthPageClient.tsx:460, 497                                       | `app/auth/AuthPageClient.tsx` 密码说明与 age-hint 均 text-xs text-muted-foreground                  | 改页面或 token：hint 使用 --muted-foreground 或略小字号/不同色 token                    | 仅该页                         | P2     | AuthPageClient.tsx 或 globals.css            | S1       |
| 19  | /search                     | 搜索框 pl-12 pr-12 min-h-[52px] rounded-xl border-2 与 Input 组件默认不一致，且与 auth 输入框视觉层级不同                         | SearchPageClient.tsx:146                                          | `app/search/SearchPageClient.tsx` 大号搜索框内联 class                                              | 改组件：Input variant "search" 或改页面使用统一 --input-hero token                      | 仅该页                         | P2     | SearchPageClient.tsx, 可选 input.tsx         | S1,S2    |
| 20  | 全站                        | Focus ring 依赖 focus-visible:ring-primary/50，部分自定义按钮未包含 focus-visible，键盘可达但无一致 focus 样式                    | 键盘导航各页；button.tsx 已有，部分页面 asChild 或自定义按钮      | 各页面自定义 button/link 未加 focus-visible                                                         | 改组件/页面：确保所有可聚焦元素含 focus-visible:ring-\* 或使用 design token             | 全站                           | P1     | globals.css, 若干组件                        | S4,S5    |

---

## 修复技能映射说明

- **S1** 设计 token 化：颜色/间距/圆角/阴影收敛到 globals.css 或 tailwind theme
- **S2** shadcn 组件收敛：统一 Button/Tabs/Input/Checkbox variant 与状态样式
- **S3** 页面容器 scope：仅在 page scope 覆盖，不污染全站（谨慎使用）
- **S4** 交互态补全：hover/active/disabled/loading/focus，且可 Playwright 断言
- **S5** a11y 修复：DialogTitle/Description、aria 属性，消除 console warning
- **S6** E2E 稳定化：testid + 稳定等待 + 网络断言

---

## 运行截图脚本命令

```bash
# 1. 启动应用（二选一）
pnpm dev
# 或
pnpm build && pnpm start

# 2. 执行截图（需 NEXT_PUBLIC_TEST_MODE=true 与 Supabase 测试账号，否则仅 1–3 通过）
pnpm exec playwright test tests/e2e/design-qa/screenshots.spec.ts --project=chromium
```

截图将保存至 `tests/design-qa/screenshots/2026-01-29/`（index.png, auth-signup.png, auth-login.png, home.png, creator-studio.png, wallet.png）。
